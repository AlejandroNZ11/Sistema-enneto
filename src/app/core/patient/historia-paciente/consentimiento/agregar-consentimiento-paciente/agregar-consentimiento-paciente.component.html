

<div class="modal-body" data-select2-id="70">
  <div class="box box-default box-solid box-default ">
    <div class="box-body" data-select2-id="69">
      <form [formGroup]="form" >
        <div class="row">
          <div class="col-md-6">
            <div class="row">
              <div class="col-md-12">
                <div class="form-group local-forms">
                  <label>Medico:</label>
                  <mat-select formControlName="medicoId"  class="form-control select"
                    placeholder="--Seleccionar--" >
                    <input type="text" class="form-control buscar" autocomplete="off"
                    placeholder="Ingrese Apellidos o Nombres" matInput
                    formControlName="terminoBusquedaMedico">
                    <mat-option value="seleccionar"> --Seleccionar-- </mat-option>
                    <ng-container *ngIf="medicosFiltrados.length > 0; else noResultadosMedico">
                      <mat-option *ngFor="let medico of medicosFiltrados" [value]="medico.id">
                        {{medico.nombre}}
                      </mat-option>
                    </ng-container>
                  </mat-select>
                  <ng-template #noResultadosMedico>
                    <p style="margin-left:1rem;">No se encontraron resultados para "{{ this.form.get('terminoBusquedaMedico')?.value}}"</p>
                  </ng-template>
                </div>
              </div>

              <div class="col-md-8">
                <div class="form-group local-forms">
                  <label>Nombre apoderado:</label>
                  <input formControlName="nombreApoderado" class="form-control" type="text">
                </div>
              </div>

              <div class="col-md-4">
                <div class="form-group local-forms">
                  <label class="control-label">Documento:</label>
                  <input formControlName="documentoApoderado" class="form-control" type="text">
                </div>
              </div>

            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group local-forms">
                  <label>Tipo Consentimiento:</label>
                  <mat-select formControlName="tipoConsentimientoId" class="form-control select" placeholder="Seleccione Estado Civil">
                    <mat-option *ngFor="let data of consentimiento" [value]="data">
                      {{data}}
                    </mat-option>
                  </mat-select>
                </div>
              </div>

            </div>



          </div>
          <div class="col-md-6">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group local-forms">
                  <label class="control-label">Fecha:</label>
                  <input formControlName="fecha" style='height:48px' class="form-control datetimepicker" type="text" placeholder="" matInput
                    [matDatepicker]="picker">
                  <mat-datepicker #picker matDatepickerFilter="DD/MM/YYYY"></mat-datepicker>
                  <mat-datepicker-toggle matIconSuffix [for]="picker"
                    matDatepickerFilter="DD/MM/YYYY"></mat-datepicker-toggle>
                </div>
              </div>

              <div class="col-md-4">
                <div class="form-group local-forms">
                  <label>Hora:<span class="login-danger">*</span></label>
                  <input formControlName="hora"  class="form-control">
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group local-forms">
                  <label>Direccion apoderado:</label>
                  <input formControlName="direccionApoderado" class="form-control" type="text">
                </div>
              </div>

              <div class="col-md-12">
                <div class="form-group local-forms">
                  <label>Menor de edad:</label>
                  <mat-select formControlName="pacienteId"  class="form-control select"
                    placeholder="--Seleccionar--" >
                    <input type="text" class="form-control buscar" autocomplete="off"
                    placeholder="Ingrese Apellidos o Nombres" matInput
                    formControlName="terminoBusquedaMenorEdad">
                    <mat-option value="seleccionar"> --Seleccionar-- </mat-option>
                    <ng-container *ngIf="menorDeEdadFiltrados.length > 0; else noResultadosMenorEdad">
                      <mat-option *ngFor="let paciente of menorDeEdadFiltrados" [value]="paciente.id">
                        {{paciente.nombre}}
                      </mat-option>
                    </ng-container>
                  </mat-select>
                  <ng-template #noResultadosMenorEdad>
                    <p style="margin-left:1rem;">No se encontraron resultados para "{{ this.form.get('terminoBusquedaMenorEdad')?.value }}"</p>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="form-group">

                <div id="signature-pad" class="signature-pad">
                  <div class="signature-pad--body">
                    <h5>Firmar aqui: <i class="fa fa-fw fa-hand-o-down"></i></h5>
                    <canvas id="canvasId" width="330" height="200"
                      style="border: 1px solid rgb(221, 221, 221); padding: 0px; margin: auto; display: block; inset: 0px; touch-action: none;"></canvas>
                  </div>
                </div>
                <!-- <button class="btn btn-warning btn-sm mt-2" type="button" id="limpiarFirma">Limpiar firma</button> -->
              </div>
            </div>
            <div class="row justify-content-center ">
              <div class="form-group col-lg-6">
                  <div class="doctor-submit text-end d-flex justify-content-center ">
                      <button
                          class="btn btn-primary cancel-form me-2" (click)="limpiarCanvas()">Limpiar firma</button>
                  </div>
              </div>
          </div>
          </div>

          <div class="doctor-submit text-end d-flex justify-content-end ">
            <button class="btn btn-primary submit-form" (click)="agregarConsentimiento()"
          >Guardar</button>
          </div>
        </div>
      </form>

    </div>

  </div>
</div>
